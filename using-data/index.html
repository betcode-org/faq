
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="FAQ for betcode open-source packages and sports trading generally">
      
      
      
      
        <link rel="prev" href="../getting-started/">
      
      
        <link rel="next" href="../developing-and-testing-strategies/">
      
      
      <link rel="icon" href="../img/logo.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.2.7">
    
    
      
        <title>Using Data - betcode FAQ</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.046329b4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.85d0ee34.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../styles/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="indigo">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#betfair-data" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="betcode FAQ" class="md-header__button md-logo" aria-label="betcode FAQ" data-md-component="logo">
      
  <img src="../img/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            betcode FAQ
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Using Data
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="betcode FAQ" class="md-nav__button md-logo" aria-label="betcode FAQ" data-md-component="logo">
      
  <img src="../img/logo.png" alt="logo">

    </a>
    betcode FAQ
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Using Data
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Using Data
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#betfair-data" class="md-nav__link">
    Betfair Data
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#third-party-data" class="md-nav__link">
    Third Party Data
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../developing-and-testing-strategies/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Developing Strategies
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../deploying-strategies/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deploying
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#betfair-data" class="md-nav__link">
    Betfair Data
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#third-party-data" class="md-nav__link">
    Third Party Data
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>Using Data</h1>

<h2 id="betfair-data">Betfair Data</h2>
<details class="question">
<summary>I’m starting to use the API to collect data. Do I need to place bets?</summary>
<p>The short answer is yes. But how many? We don't know.</p>
<p>The key principle is that Betfair allows you access to their data for your personal betting activities, but they sell it to other users. So they want to be sure that you're not collecting it for commercial use. Show them some betting activity as evidence that you're using it only for your personal use and you'll be OK.</p>
</details>
<details class="question">
<summary>How do I filter streams by competition?</summary>
<p>Sadly, you can't. When using Flumine the best approach is to include a condition in your strategy's <code>check_market_book</code> method to discard the competitions that you're not interested in.</p>
<p>Betfair are aware of this limitation, but apparently it's a lot of work to remove.</p>
</details>
<details class="question">
<summary>How do I match runner names to runner IDs?</summary>
<p>Betfair market books allow you to see the prices ladder for each runner ID (selection_id) but not the name. The names for each runner can be found in the market catalogue.</p>
<p>When running a live strategy, Flumine will automatically inject the market catalogue into your data in <code>market.market_catalogue</code>, but when backtesting it's only available if you recorded it at the time. If you did, then you can inject it into your testing results using <a href="https://github.com/betcode-org/flumine/blob/master/examples/middleware/marketcatalogue.py">the market catalogue middleware</a>.</p>
</details>
<details class="question">
<summary>How can I get the last traded price before a match starts without recording the whole market?</summary>
<p>A rough and ready way would be to use Betfairlightweight to place an API call at the scheduled market time and use the last traded price at that point.
However, if you're streaming market data in Flumine, there's very little overhead to storing last traded prices in the strategy's "context" dictionary <code>strategy.context</code> and overwriting them each time they market update changes them until the market goes "inplay". This would be the recommended approach in most situations.</p>
</details>
<details class="question">
<summary>The market start times don’t seem to match when events actually start in my country. Why is this?</summary>
<p>Betfair datetimes are always for UTC timezone. You will need to translate them to your local timezone.</p>
</details>
<details class="question">
<summary>How do I get the trap number for greyhounds in Betfair?</summary>
<p>The trap number is always the first character (and very, very rarely, first two characters) of the runner name. So if <code>Droopys Child</code> is running in trap 3, the selection name in the market catalogue will be <code>3. Droopys Child</code>. If that dog is a non-runner, then for UK greyhounds it might be replaced by <code>3. Flopsy Bunny (res)</code>. for Australian greyhounds the replacement might be <code>9. Flopsy Bunny</code>, with sort priority 3.</p>
</details>
<details class="question">
<summary>I see that I can download or buy historical data from Betfair. Is it worth it?</summary>
<p>Betfair historical data comes in three flavours: basic, advanced and pro. The <a href="https://historicdata.betfair.com/Betfair-Historical-Data-Feed-Specification.pdf">specification for each package is available here</a>. Basic data is free but generally of little value as it contains the last traded price at minute intervals and little else. Advanced offers data on best prices and volumes, but with a 1 second frequency only. Pro data is intended to provide the same content and granularity as if you were streaming it yourself.</p>
<p>The channel's most common recommendation is to stream and collect it yourself. If you have time constraints or deep pockets, the most common recommendation is not use only the Pro version unless and exceptionally your intended strategy will be specifically geared to the lower frequency of the Advanced data.</p>
<p>If you are considering purchasing data, do checkout what <a href="https://historicdata.betfair.com/#/home">free advanced and pro data</a> Betfair might have available at the time.</p>
</details>
<details class="question">
<summary>Where can I get historical Betfair starting prices?</summary>
<p>Historic BSPs are only available for horse and greyhound racing and can be found <a href="https://promo.betfair.com/betfairsp/prices">on the Betfair prices page</a>, though the data is sometimes incomplete.</p>
</details>
<h2 id="third-party-data">Third Party Data</h2>
<details class="question">
<summary>Where can I get historic starting prices for football matches?</summary>
<p>Until recently, Betfair didn't have starting prices for football (soccer) matches. It is currently rolling them out to a limited number of top level matches, but the starting prices still aren't published after the event, and may never be. Alternatives are bookmaker starting prices and Betfair pre-match closing prices.</p>
<p>Bookmaker starting prices (aka market closing prices) for major leagues are available for free from <a href="https://football-data.co.uk/">football-data.co.uk</a> and a host of paid-for services.</p>
<p>Betfair pre-match closing prices can be recorded by streaming markets, saving the current prices to the market.context dcitionnary and overwriting the values each time there's an update, until the market goes in-play.</p>
</details>
<details class="question">
<summary>I’ve been using a third-party soccer feed, but the team names don’t always match with Betfair's. How do other people handle this?</summary>
<p>There's no easy answer to this. Many people build and maintain mappings between the data provided by different providers.</p>
<p>These mappings may be created manually or programmatically by using a combination of event matching and fuzzy text matching. So for example, by matching all soccer teams in the same league, or all the horses in the same race, you will usually be left with only a very small number that don't match easily.
Although not a direct answer to your question, you may also find these <a href="https://github.com/mberk/betfairmappings">Betfair mappings</a> helpful.</p>
</details>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.dfff1995.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.dff1b7c8.min.js"></script>
      
    
  </body>
</html>